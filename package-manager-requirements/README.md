# パッケージマネージャーへの要件

各OSにいろんなパッケージマネージャーがあるけど、
基本的な使い方を横断的に定義してメモしておこうという記事。
ベースになるのはFreeBSDのpkg。非常に整理されててわかりやすいので。

## 基礎的な要件

要件って言うかユースケースとかシナリオというほうが適切かも。

*   パッケージを指定してインストールできること

    必要な(依存する)別パッケージがあればそれらを自動でインストールする。
    指定したパッケージは非自動とマークし、
    依存により自動でインストールされたパッケージは自動とマークし、
    後にその情報を利用して、参照や削除ができること。

*   パッケージを指定してアンインストール(削除)できること

    依存パッケージについてはどちらでも良い。
    ただし自動で削除しないのであれば追加で以下の要件が生じる。

    *   どこからも依存されてないパッケージを検出し削除できること

*   未インストールのパッケージの情報を参照できること

    * 未インストールのパッケージの一覧を表示できる
    * 当該パッケージの詳細情報を参照できる
    * 当該パッケージの依存パッケージの一覧を参照できる。
    * (OPTION) 当該パッケージの依存パッケージの一覧を再帰的に参照できる
    * (OPTION) 当該パッケージの依存パッケージの一覧を再帰的に木構造で参照できる

*   インストール済みパッケージの情報を参照できること

    *   インストール済みパッケージの一覧を表示できる
    *   当該パッケージの詳細情報を参照できる
    *   当該パッケージの依存パッケージの一覧を参照できる。
    *   インストールされているファイルが所属するパッケージを特定する
    *   自動・非自動の属性変更
    *   (OPTION) 当該パッケージの依存パッケージの一覧を再帰的に参照できる
    *   (OPTION) 当該パッケージの依存パッケージの一覧を再帰的に木構造で参照できる

    自動・非自動のインストールマークに基づき、インストール済みパッケージに対して次の分類を決定できる。
    これは[FreeBSDにおける分類](https://docs.freebsd.org/en/books/handbook/ports/#portmaster)に基づいたもの。
    オプションでも良い。

    *   Root: 依存が無く、また被依存もないパッケージ
    *   Trunk: 依存は無いけども、被依存はあるパッケージ
    *   Branch: 依存が有り、被依存もあるパッケージ
    *   Leaf: 依存は有るが、被依存はないパッケージ

*   インストール済みパッケージを最新版へ更新できること

    *   パッケージ情報をリモートの最新版からローカルへ同期する
    *   更新可能な各パッケージを更新する

        この際、非自動・自動のマークが変更されてはいけない

### ユースケースを箇条書き

前述の要件は見通しが悪いので、ここに一覧としてまとめ直す。 
カッコ内はユースケースの管理のためのID。

*   インストール (UC01)
*   アンインストール (UC02)
    *   クリーンナップ (UC03)
*   インストール済みの更新 (UC04)
    *   レポジトリの同期 (UC05)
*   未インストールの検証
    *   一覧 (UC06)
        *   名前指定(グロブや正規表現)フィルタ
    *   詳細(説明等) (UC07)
    *   依存パッケージ一覧 (UC08)
*   インストール済みの検証
    *   一覧 (UC09)
        *   名前指定(グロブや正規表現)フィルタ
        *   自動・非自動インストール属性指定フィルタ
    *   詳細(説明等) (UC10)
    *   構成ファイル一覧 (UC11)
        *   ファイルからパッケージを特定 (UC12)
    *   依存パッケージ一覧 (UC13)
    *   被依存パッケージ一覧 (UC14)
    *   自動・非自動の属性変更 (UC15)

とりあえず全15個とする。

## 調べたい・まとめたいパッケージマネージャー

*   FreeBSD pkg & ports (portmaster)
*   pacman (MSYS2, Windows)
*   apt (Ubuntu, Debian)
*   dnf (Fedora)
*   (OPTION) winget

### FreeBSD pkg and ports (portmaster)

### pacman (MSYS2, Windows)

### apt (Ubuntu, Debian)

### dnf (Fedora)

### (OPTION) winget
